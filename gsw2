local barrelsFolder = workspace:WaitForChild("Barrels"):WaitForChild("Barrels")
local cratesFolder = workspace:WaitForChild("Barrels"):WaitForChild("Crates")
local kitchenFolder = workspace:WaitForChild("Island8"):WaitForChild("Kitchen")
local player = game:GetService("Players").LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
local backpack = player:WaitForChild("Backpack")
local random = Random.new()

while true do
    -- Continuously check Backpack count during processing
    local backpackCount = #backpack:GetChildren()

    if backpackCount > 15 then
        -- Handle Mixer2 in Kitchen folders
        for _, folder in pairs(kitchenFolder:GetChildren()) do
            if folder:FindFirstChild("JuicingBowl") then
                local mixer2 = folder.JuicingBowl:FindFirstChild("Mixer2")
                if mixer2 and mixer2:FindFirstChild("ClickDetector") then
                    local offsetX = random:NextNumber(-2, 2)
                    local offsetZ = random:NextNumber(-2, 2)
                    humanoidRootPart.CFrame = CFrame.new(mixer2.Position + Vector3.new(offsetX, 5, offsetZ))
                    wait(random:NextNumber(0.5, 1.5))
                    fireclickdetector(mixer2.ClickDetector)
                end
            end
        end
    else
        -- Handle Barrels with continuous Backpack check
        for _, barrel in pairs(barrelsFolder:GetChildren()) do
            if barrel:FindFirstChild("ClickDetector") then
                local offsetX = random:NextNumber(-2, 2)
                local offsetZ = random:NextNumber(-2, 2)
                humanoidRootPart.CFrame = CFrame.new(barrel.Position + Vector3.new(offsetX, 5, offsetZ))
                wait(random:NextNumber(0.1, 0.5))
                fireclickdetector(barrel.ClickDetector)
                if #backpack:GetChildren() > 15 then break end -- Switch to Mixer2 if condition met
            end
        end
        
        -- Handle Crates with continuous Backpack check
        for _, crate in pairs(cratesFolder:GetChildren()) do
            if crate:FindFirstChild("ClickDetector") then
                local offsetX = random:NextNumber(-2, 2)
                local offsetZ = random:NextNumber(-2, 2)
                humanoidRootPart.CFrame = CFrame.new(crate.Position + Vector3.new(offsetX, 5, offsetZ))
                wait(random:NextNumber(0.5, 1.5))
                fireclickdetector(crate.ClickDetector)
                if #backpack:GetChildren() > 15 then break end -- Switch to Mixer2 if condition met
            end
        end
        
        -- Handle Mixer2 in Kitchen folders
        for _, folder in pairs(kitchenFolder:GetChildren()) do
            if folder:FindFirstChild("JuicingBowl") then
                local mixer2 = folder.JuicingBowl:FindFirstChild("Mixer2")
                if mixer2 and mixer2:FindFirstChild("ClickDetector") then
                    local offsetX = random:NextNumber(-2, 2)
                    local offsetZ = random:NextNumber(-2, 2)
                    humanoidRootPart.CFrame = CFrame.new(mixer2.Position + Vector3.new(offsetX, 5, offsetZ))
                    wait(random:NextNumber(0.5, 1.5))
                    fireclickdetector(mixer2.ClickDetector)
                end
            end
        end
    end
    
    wait(10) -- Wait 10 seconds before repeating the cycle
end
