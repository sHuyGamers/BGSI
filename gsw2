getgenv().Target = "cyberoJH6rXOliaD4"
getgenv().Select_Pet = {
    "Racoon",
    "Kitsune"
}
getgenv().Kick_After_Trade = true
repeat task.wait() until game:IsLoaded()
repeat task.wait() until game.Players.LocalPlayer.Character

local plr = game:GetService("Players").LocalPlayer
local VirtualUser = game:service "VirtualUser"

--[[if game.JobId ~= getgenv().JobId then
    game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, getgenv().JobId, plr)
end]]

while not (plr:GetAttribute("DataFullyLoaded") and plr:GetAttribute("Finished_Loading")) do
    task.wait()
    VirtualUser:CaptureController()
	VirtualUser:ClickButton2(Vector2.new())
end

plr.Idled:connect(
	function()
		VirtualUser:CaptureController()
		VirtualUser:ClickButton2(Vector2.new())
	end
)

local function check_pet(name)
    local petname = string.match(name, "^(.-)%s%[")
    if petname then
        for i, v in pairs(getgenv().Select_Pet) do
            if v:lower() == petname:lower() then
                return true
            end
        end
    end
    return false
end

local save = {}

if getgenv().Target == plr.Name then
    game:GetService("ReplicatedStorage"):FindFirstChild("GameEvents"):FindFirstChild("GiftPet").OnClientEvent:Connect(function(id, name, sender)
        pcall(function()
            game:GetService("ReplicatedStorage"):FindFirstChild("GameEvents"):FindFirstChild("AcceptPetGift"):FireServer(true, id)
            task.wait(5)
        end)
    end)
else
    for i, v in pairs(plr:FindFirstChild("Backpack"):GetChildren()) do
        if v:IsA("Tool") and v:GetAttribute("ItemType") == "Pet" and check_pet(v.Name) then
            if not table.find(save, v) then
                table.insert(save, v)
            end
        end
    end
    while task.wait() do
        for i, v in pairs(save) do
            local petTool = plr:FindFirstChild("Backpack"):FindFirstChild(v.Name)
            if petTool then
                if petTool:GetAttribute("Favorite") then
                    game:GetService("ReplicatedStorage"):WaitForChild("GameEvents"):WaitForChild("Favorite_Item"):FireServer(petTool)
                    task.wait(1) 
                end
                local huy = game:GetService("Players"):FindFirstChild(getgenv().Target)
                if huy then
                    plr.Character.Humanoid:EquipTool(petTool)
                    game:GetService("ReplicatedStorage"):WaitForChild("GameEvents"):WaitForChild("PetGiftingService"):FireServer("GivePet", huy)
                    task.wait(5)
                end
            else
                save[i] = nil
            end
        end
        if #save == 0 then
            break
        end
    end
    writefile(plr.Name .. ".txt", "Completed-gom pet")
    if getgenv().Kick_After_Trade then
        plr:Kick("Done")
    end
end
